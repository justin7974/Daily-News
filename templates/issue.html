<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <title>{{TITLE}}</title>
  <meta name="description" content="{{DESCRIPTION}}">
  <link rel="stylesheet" href="style.css">
  <script>var s=localStorage.getItem('theme');if(s)document.documentElement.setAttribute('data-theme',s);</script>
</head>
<body>
  <header class="header">
    <div class="container">
      <div class="header-inner">
        <span class="logo">ğŸ¦ å°è™¾AIæ—¥æŠ¥</span>
        <button class="header-icon" id="calendarBtn" title="æ—¥æœŸé€‰æ‹©">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
        </button>
      </div>
    </div>
  </header>

  <!-- æ—¥å†æµ®å±‚ï¼šç‹¬ç«‹äº header -->
  <div class="dp-overlay" id="dpOverlay">
    <div class="dp-sheet">
      <div class="dp-panel" id="dpPanel"></div>
      <a href="archive.html" class="dp-archive-link">æŸ¥çœ‹æ—¥æŠ¥åˆ—è¡¨å½’æ¡£ â†’</a>
    </div>
  </div>

  <nav class="date-bar">
    <div class="container">
      <div class="date-bar-inner">
        <a href="{{PREV_LINK}}" class="date-arrow {{PREV_DISABLED}}">â€¹</a>
        <div class="date-center">
          <span class="date-main">{{DATE_DISPLAY}}</span>
          <span class="date-sub">{{STAT_LINE}}</span>
        </div>
        <a href="{{NEXT_LINK}}" class="date-arrow {{NEXT_DISABLED}}">â€º</a>
      </div>
    </div>
  </nav>

  <!-- Tab å¯¼èˆª -->
  <div class="tab-bar">
    <div class="container">
      <div class="tab-nav">
        <button class="tab-btn active" data-tab="rss">
          <span class="tab-emoji">ğŸ“°</span>
          <span class="tab-label">RSS</span>
          <span class="tab-count">{{RSS_COUNT}}</span>
        </button>
        <button class="tab-btn" data-tab="twitter">
          <span class="tab-emoji">ğŸ¦</span>
          <span class="tab-label">Twitter</span>
          <span class="tab-count">{{TWEET_COUNT}}</span>
        </button>
        <button class="tab-btn" data-tab="wechat">
          <span class="tab-emoji">ğŸ“±</span>
          <span class="tab-label">å…¬ä¼—å·</span>
          <span class="tab-count">{{WX_COUNT}}</span>
        </button>
      </div>
    </div>
  </div>

  <main class="container main-content">
    <div class="tab-panel active" id="tab-rss">
      {{RSS_SECTION}}
    </div>

    <div class="tab-panel" id="tab-twitter">
      {{TWITTER_SECTION}}
    </div>

    <div class="tab-panel" id="tab-wechat">
      {{WX_SECTION}}
    </div>
  </main>

  <footer class="footer">
    <div class="container">
      <div class="footer-inner">
        <span class="footer-text">ğŸ¦ å°è™¾AIæ—¥æŠ¥</span>
        <button class="theme-btn" onclick="toggleTheme()">åˆ‡æ¢ä¸»é¢˜</button>
      </div>
    </div>
  </footer>

  <script>
    var AVAILABLE_DATES = {{AVAILABLE_DATES}};
    var CURRENT_DATE = '{{CURRENT_DATE}}';
  </script>
  <script src="theme.js"></script>
  <script src="datepicker.js"></script>
  <script>
    // Tab åˆ‡æ¢é€»è¾‘
    (function() {
      var btns = document.querySelectorAll('.tab-btn');
      var panels = document.querySelectorAll('.tab-panel');

      function switchTab(tabId) {
        btns.forEach(function(b) {
          b.classList.toggle('active', b.getAttribute('data-tab') === tabId);
        });
        panels.forEach(function(p) {
          p.classList.toggle('active', p.id === 'tab-' + tabId);
        });
        // è®°ä½ç”¨æˆ·é€‰æ‹©
        try { localStorage.setItem('activeTab', tabId); } catch(e) {}
      }

      btns.forEach(function(btn) {
        btn.addEventListener('click', function() {
          switchTab(this.getAttribute('data-tab'));
        });
      });

      // æ¢å¤ä¸Šæ¬¡é€‰æ‹©çš„ tab
      try {
        var saved = localStorage.getItem('activeTab');
        if (saved && document.getElementById('tab-' + saved)) {
          switchTab(saved);
        }
      } catch(e) {}
    })();
  </script>
</body>
</html>
